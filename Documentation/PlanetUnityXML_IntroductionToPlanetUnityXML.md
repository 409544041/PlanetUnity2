[Table of Contents](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/TableOfContents.md)

# Introduction to Planet Unity XML


## Primer

Writing user interfaces with XML should be very intuitive for many people; technologies such as HTML have been around a long time and just about everyone has had some exposure to it. So this document is not going to much time going over it in detail, other than to give a quick example to show how simple it can be when combined with the power of the Unity Editor.

Let's start with something extremely simple by writing some XML to make the entire screen red. If you read the integration document, then this XML should look familiar:

~~~~
<?xml version="1.0" encoding="utf-8" ?>
<Canvas renderMode="ScreenSpaceOverlay" xmlns="http://schema.smallplanet.com/PlanetUnity2.xsd" >
	<Color color="#FF0000FF" anchor="stretch,stretch" />
</Canvas>
~~~~

When Planet Unity loads this XML, it will start at the root node (the Canvas) and instantiate a PUCanvas object, and have the PUCanvas generate a game object and add to it the corresponding UI components required (in this case, Canvas and GraphicRaycaster). It will then run through all of the children of the canvas, and instantiate the corresponding PU classes for those entities (in our example, that would be PUColor), and have them generate game objects and add the correct components to those game objects.

Once everything is loading, in the Unity Editor object hierarchy we will see the corresponding game objects there.

![](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/Images/primer.hierarchy.png)

Working side-by-side with the Unity Editor makes it extremely simple to write XML and directly view exactly what is being generated by Planet Unity.

Too simple? Check out the ###[Image Search](https://github.com/SmallPlanetUnity/ImageSearch) example project.

![](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/Images/kittens_sample.png)




## Top Down Game Object Creation

Planet Unity XML is converted to Unity Game Objects in read order; meaning it starts from the root down, depth first. As such, XML entities defined higher up in the document will be higher up in your Game Object hierarchy, causing them to render first and be behind entities defined later in the file.  Top first, draw first.

## PUGameObject - what all the cool kids subclass

PUGameObject is what all of the Planet Unity entities subclass; it handles the instantiation of the Unity Game Object for said entity, and handles all of the standard attributes needed for RectTransforms and such. You can read more in-depth on the PUGameObject class in the [Standard Entities](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/PlanetUnityXML_StandardEntities.md) page, but here I'd like to point out some of the fundamentals of laying out your entities.

Please note this is not intended to be an introduction into the Unity UI system; while the uninitiated can probably get through this just fine without, a solid understanding of how to use the Unity UI system will go a long way to understanding Planet Unity.

The basics of laying out your entities start with **position** and **size**. As you can imagine, you could use position and size directly in the XML:

~~~~
<Color color="#FF0000FF" position="0,0" size="100,100" />
~~~~

PUGameObject also provide the convenience attribute **bounds**; bounds is simply position and size combined with the format of *x,y,width,height*.  As such, the following is the same red square as above, it simply requires less typing:

~~~~
<Color color="#FF0000FF" bounds="0,0,100,100" />
~~~~

The other layout attributes one commonly uses are **pivot** and **anchor**.  The default value for pivot is **0,0** and the default value for anchor is **bottom,left**. Pivot describes how the rectangle is drawn around its position.

### Pivot

You can think of the pivot as "how my rectangle is draw about its position". With a default pivot of 0,0, the red rectangle with draw above and to the right of the position.  So take the following example, where we have four colored squares all with the same position and size, but different pivots:

~~~~
<Color color="#FF0000FF" bounds="0,0,100,100" pivot="0,0" />
<Color color="#00FF00FF" bounds="0,0,100,100" pivot="1,0" />
<Color color="#0000FFFF" bounds="0,0,100,100" pivot="0,1" />
<Color color="#00FFFFFF" bounds="0,0,100,100" pivot="1,1" />
~~~~

![](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/Images/pivot.png)

### Anchor

You can think of anchor as "how my rectangle position is reckoned in relation to my parent". With a default anchor of bottom,left, the position of 0,0 for your red square will be in the bottom and left corner of the parent.  So take the following example:

~~~~
<Color color="#000000FF" bounds="0,0,300,300">
	<Color color="#FF0000FF" bounds="0,0,100,100" pivot="0.5,0.5" anchor="bottom,left"/>
	<Color color="#00FF00FF" bounds="0,0,100,100" pivot="0.5,0.5" anchor="top,left"/>
	<Color color="#0000FFFF" bounds="0,0,100,100" pivot="0.5,0.5" anchor="bottom,right"/>
	<Color color="#00FFFFFF" bounds="0,0,100,100" pivot="0.5,0.5" anchor="top,right"/>
	<Color color="#FF00FFFF" bounds="0,0,100,100" pivot="0.5,0.5" anchor="middle,center"/>
</Color>
~~~~

![](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/Images/anchor.png)

In this example, we have five colored squares as children of the black square.  Each child has the same position, size, and pivot (a pivot of 0.5,0.5 means the position will be in the center of the square). The only change is the anchor of each colored square. As you can see, the red square's position of 0,0 is in the bottom,left corner of the black square, whereas the position 0,0 of the green square is in the top,left corner of the black square. Finally, the magenta square is smack in the middle,center of the black square.

Under the hood Unity UI defines anchors as minimum and maximum floating point values. In practical usage, specifying the anchor is much easier given one of the preset values.  The preset values supported by PUGameObject are:

"top,left"
"top,center"
"top,right"
"top,stretch"
"middle,left"
"middle,center"
"middle,right"
"middle,stretch"
"bottom,left"
"bottom,center"
"bottom,right"
"bottom,stretch"
"stretch,left"
"stretch,center"
"stretch,right"
"stretch,stretch"

The keen observer will note the option of setting and anchor to **stretch**. By using the stretch anchor it will allow your square to grow or shrink at the parent game object grows or shrinks.  Let's use another example:

~~~~
<Color color="#000000FF" bounds="0,0,150,150">
	<Color color="#FF0000FF" bounds="20,20,110,110" anchor="bottom,stretch"/>
</Color>
~~~~

![](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/Images/stretch.gif)

In this example, the red square's anchor is set to bottom,stretch; this means that it will be attached to the bottom of the parent, but will stretch with the parent horizontally. When you set a side to stretch, the game object will remeber its offset delta in units from the sides of the parent. In this case, the red square is 20 units away from the left side and 20 units away from the right side. As the parent grows or shrinks, it will maintain those same 20 units.


## Standard Entities

Planet Unity supports the majority of the "standard" Unity UI components out of the box, such as Text, Image, RawImage, ImageButton, InputField, ScrollRect, and Canvas. Planet Unity also has a selection of entities above and beyond the standard, such as Table/SimpleTable/GridTable, Color, Clear, and Switcher.  All of the entities Planet Unity supports are listed in the [Standard Entities](https://github.com/SmallPlanetUnity/PlanetUnity2/blob/master/Documentation/PlanetUnityXML_StandardEntities.md) page.

